(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{fPP7:function(o,t,e){"use strict";e.r(t),e.d(t,"EscolaPageModule",function(){return L});var r=e("ofXK"),a=e("3Pt+"),n=e("TEn/"),i=e("tyNb"),c=e("mrSG"),s=e("WSGN"),l=e("eZDI"),m=e("fXoL"),u=e("VzdP"),d=e("kmnG"),b=e("qFsG"),f=e("8UY1"),h=e("d3UM"),p=e("bSwM"),g=e("FKr1");function v(o,t){if(1&o&&(m.Sb(0,"div",5),m.rc(1),m.Rb()),2&o){const o=m.ec();m.Cb(1),m.tc(" ",o.error," ")}}function C(o,t){1&o&&(m.Sb(0,"h1"),m.rc(1,"Dados da Escola"),m.Rb())}function S(o,t){if(1&o&&(m.Sb(0,"mat-option",24),m.rc(1),m.Rb()),2&o){const o=t.$implicit;m.hc("value",o.sigla),m.Cb(1),m.tc(" ",o.nome," ")}}const R=function(){return{mask:"(00) 0000-00000"}},w=function(){return{mask:"00000-000"}};function O(o,t){if(1&o&&(m.Sb(0,"form",10),m.Sb(1,"mat-form-field",11),m.Sb(2,"mat-label"),m.rc(3,"Nome"),m.Rb(),m.Ob(4,"input",12),m.Rb(),m.Sb(5,"mat-form-field",11),m.Sb(6,"mat-label"),m.rc(7,"Email"),m.Rb(),m.Ob(8,"input",13),m.Rb(),m.Sb(9,"mat-form-field",11),m.Sb(10,"mat-label"),m.rc(11,"Fone"),m.Rb(),m.Ob(12,"input",14),m.Rb(),m.Sb(13,"mat-form-field",11),m.Sb(14,"mat-label"),m.rc(15,"CEP"),m.Rb(),m.Ob(16,"input",15),m.Rb(),m.Sb(17,"mat-form-field",11),m.Sb(18,"mat-label"),m.rc(19,"Estado"),m.Rb(),m.Sb(20,"mat-select",16),m.qc(21,S,2,2,"mat-option",17),m.Rb(),m.Rb(),m.Sb(22,"mat-form-field",11),m.Sb(23,"mat-label"),m.rc(24,"Cidade"),m.Rb(),m.Ob(25,"input",18),m.Rb(),m.Sb(26,"mat-form-field",11),m.Sb(27,"mat-label"),m.rc(28,"Bairro"),m.Rb(),m.Ob(29,"input",19),m.Rb(),m.Sb(30,"mat-form-field",11),m.Sb(31,"mat-label"),m.rc(32,"Logradouro"),m.Rb(),m.Ob(33,"input",20),m.Rb(),m.Sb(34,"mat-form-field",11),m.Sb(35,"mat-label"),m.rc(36,"N\xfamero"),m.Rb(),m.Ob(37,"input",21),m.Rb(),m.Sb(38,"mat-form-field",11),m.Sb(39,"mat-label"),m.rc(40,"Complemento"),m.Rb(),m.Ob(41,"input",22),m.Rb(),m.Sb(42,"mat-checkbox",23),m.rc(43,"Ativa"),m.Rb(),m.Rb()),2&o){const o=m.ec(2);m.hc("formGroup",o.form),m.Cb(12),m.hc("imask",m.ic(5,R)),m.Cb(4),m.hc("imask",m.ic(6,w)),m.Cb(4),m.hc("compareWith",o.compareFn),m.Cb(1),m.hc("ngForOf",o.estados)}}function I(o,t){if(1&o){const o=m.Tb();m.Sb(0,"ion-toolbar"),m.Sb(1,"ion-button",25),m.ac("click",function(){return m.mc(o),m.ec(2).resetarFormulario()}),m.rc(2," Desfazer "),m.Rb(),m.Sb(3,"ion-button",26),m.ac("click",function(){return m.mc(o),m.ec(2).salvarFormulario()}),m.rc(4," Salvar "),m.Rb(),m.Rb()}}const P=function(o){return["/turma/new",o]};function k(o,t){if(1&o&&(m.Sb(0,"ion-toolbar"),m.Sb(1,"ion-title"),m.rc(2,"Turmas"),m.Rb(),m.Sb(3,"ion-button",27),m.Ob(4,"ion-icon",28),m.Rb(),m.Rb()),2&o){const o=m.ec(2);m.Cb(3),m.hc("routerLink",m.jc(1,P,o.escola.id))}}function y(o,t){1&o&&m.Ob(0,"ion-icon",36)}const M=function(){return["hoverable","pointable"]},q=function(o){return["/turma",o]};function _(o,t){if(1&o&&(m.Sb(0,"ion-item",30),m.Sb(1,"div",31),m.Sb(2,"div",32),m.rc(3),m.Rb(),m.Sb(4,"div",33),m.rc(5),m.Rb(),m.Sb(6,"div",34),m.qc(7,y,1,0,"ion-icon",35),m.Rb(),m.Rb(),m.Rb()),2&o){const o=t.$implicit;m.hc("ngClass",m.ic(5,M))("routerLink",m.jc(6,q,o.id)),m.Cb(3),m.tc("Turma #",o.numero,""),m.Cb(2),m.tc("",o.serie,"\xaa s\xe9rie "),m.Cb(2),m.hc("ngIf",o.ativa)}}function F(o,t){if(1&o&&(m.Sb(0,"ion-list"),m.qc(1,_,8,8,"ion-item",29),m.Rb()),2&o){const o=m.ec(2);m.Cb(1),m.hc("ngForOf",o.turmas)}}function N(o,t){if(1&o&&(m.Sb(0,"div",6),m.Sb(1,"div",7),m.qc(2,C,2,0,"h1",8),m.qc(3,O,44,7,"form",9),m.qc(4,I,5,0,"ion-toolbar",8),m.qc(5,k,5,3,"ion-toolbar",8),m.qc(6,F,2,1,"ion-list",8),m.Rb(),m.Rb()),2&o){const o=m.ec();m.Cb(2),m.hc("ngIf",o.escola),m.Cb(1),m.hc("ngIf",o.form),m.Cb(1),m.hc("ngIf",o.escola),m.Cb(1),m.hc("ngIf",o.escolaId&&o.escola&&o.turmas),m.Cb(1),m.hc("ngIf",o.escolaId&&o.escola&&o.turmas&&o.turmas.length)}}const V=[{path:"",component:(()=>{class o{constructor(o,t,e){this.router=o,this.activatedRoute=t,this.escolasProvider=e,this.loading=!1,this.turmas=[],this.estados=l.a,this.escolaId=this.activatedRoute.snapshot.paramMap.get("escolaId")}ionViewDidEnter(){this.escolaId?this.carregaEscola():this.criaEscola()}carregaEscola(){return Object(c.a)(this,void 0,void 0,function*(){this.loading=!0,this.error=null;try{let{escola:o,turmas:t}=yield this.escolasProvider.buscaEscola(this.escolaId);this.escola=o,this.loadForm(),this.turmas=t,this.error=""}catch(o){this.error=o.message||"Falha ao buscar escola."}this.loading=!1})}criaEscola(){return Object(c.a)(this,void 0,void 0,function*(){let o=new s.a;this.escola=o,this.loadForm()})}loadForm(){this.escola&&(this.form=new a.f({id:new a.d(this.escola.id,{validators:[]}),nome:new a.d(this.escola.nome,{validators:[a.r.required]}),logradouro:new a.d(this.escola.logradouro,{validators:[a.r.required]}),numero:new a.d(this.escola.numero,{validators:[a.r.required]}),bairro:new a.d(this.escola.bairro,{validators:[a.r.required]}),cidade:new a.d(this.escola.cidade,{validators:[a.r.required]}),estado:new a.d(this.escola.estado,{validators:[a.r.required]}),cep:new a.d(this.escola.cep,{validators:[a.r.required]}),complemento:new a.d(this.escola.complemento,{validators:[]}),fone:new a.d(this.escola.fone,{validators:[a.r.required]}),email:new a.d(this.escola.email,{validators:[a.r.required]}),ativa:new a.d(this.escola.ativa,{validators:[a.r.required]})}))}salvarFormulario(){return Object(c.a)(this,void 0,void 0,function*(){try{let o=new s.a(this.form.getRawValue());this.escolasProvider.salvaEscola(o),this.escola=o,this.escolaId||(this.escolaId=this.escola.id,this.router.navigate(["/escola",o.id],{replaceUrl:!0}),this.turmas=[])}catch(o){alert(o.message||"Falha ao salvar escola.")}})}resetarFormulario(){this.escola&&(this.form.controls.id.setValue(this.escola.id),this.form.controls.nome.setValue(this.escola.nome),this.form.controls.logradouro.setValue(this.escola.logradouro),this.form.controls.numero.setValue(this.escola.numero),this.form.controls.bairro.setValue(this.escola.bairro),this.form.controls.cidade.setValue(this.escola.cidade),this.form.controls.estado.setValue(this.escola.estado),this.form.controls.cep.setValue(this.escola.cep),this.form.controls.complemento.setValue(this.escola.complemento),this.form.controls.fone.setValue(this.escola.fone),this.form.controls.email.setValue(this.escola.email),this.form.controls.ativa.setValue(this.escola.ativa))}compareFn(o,t){return o==t}}return o.\u0275fac=function(t){return new(t||o)(m.Nb(i.g),m.Nb(i.a),m.Nb(u.a))},o.\u0275cmp=m.Hb({type:o,selectors:[["app-escola"]],decls:9,vars:2,consts:[["slot","start"],["defaultHref","/"],[1,"ion-padding"],["class","colunas error",4,"ngIf"],["class","colunas",4,"ngIf"],[1,"colunas","error"],[1,"colunas"],[1,"coluna-central"],[4,"ngIf"],["class","form-escola",3,"formGroup",4,"ngIf"],[1,"form-escola",3,"formGroup"],[1,"campo"],["matInput","","type","text","formControlName","nome"],["matInput","","type","email","formControlName","email"],["matInput","","type","tel","formControlName","fone",3,"imask"],["matInput","","type","text","formControlName","cep",3,"imask"],["formControlName","estado",3,"compareWith"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","text","formControlName","cidade"],["matInput","","type","text","formControlName","bairro"],["matInput","","type","text","formControlName","logradouro"],["matInput","","type","number","formControlName","numero"],["matInput","","type","text","formControlName","complemento"],["formControlName","ativa",1,"campo"],[3,"value"],["ion-button","","shape","round","fill","clear","type","button","color","dark",1,"ion-margin",3,"click"],["ion-button","","shape","round","fill","clear","type","button","color","primary",1,"ion-margin",3,"click"],["ion-button","","slot","end","shape","round","fill","clear","type","button","color","dark",1,"ion-margin",3,"routerLink"],["name","add-sharp"],[3,"ngClass","routerLink",4,"ngFor","ngForOf"],[3,"ngClass","routerLink"],[1,"conteudo-item"],[1,"numero"],[1,"serie"],[1,"ativa"],["name","checkmark-sharp",4,"ngIf"],["name","checkmark-sharp"]],template:function(o,t){1&o&&(m.Sb(0,"ion-header"),m.Sb(1,"ion-toolbar"),m.Sb(2,"ion-buttons",0),m.Ob(3,"ion-back-button",1),m.Rb(),m.Sb(4,"ion-title"),m.rc(5,"Escola"),m.Rb(),m.Rb(),m.Rb(),m.Sb(6,"ion-content",2),m.qc(7,v,2,1,"div",3),m.qc(8,N,7,5,"div",4),m.Rb()),2&o&&(m.Cb(7),m.hc("ngIf",t.error&&!t.loading),m.Cb(1),m.hc("ngIf",!t.error&&!t.loading))},directives:[n.h,n.o,n.e,n.b,n.c,n.n,n.f,r.j,a.s,a.m,a.g,d.b,d.e,b.a,a.c,a.l,a.e,f.a,h.a,r.i,a.p,p.a,g.e,n.d,n.t,i.h,n.i,n.k,n.j,r.h],styles:[".hoverable[_ngcontent-%COMP%]:hover{background-color:#f3f3f3}.pointable[_ngcontent-%COMP%]{cursor:pointer}.error[_ngcontent-%COMP%]{width:100%;height:100%;display:grid;align-items:center}.colunas[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr}.colunas[_ngcontent-%COMP%]   .form-escola[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto;grid-gap:8px}@media (min-width:768px){.colunas[_ngcontent-%COMP%]   .form-escola[_ngcontent-%COMP%]{grid-template-columns:auto auto auto}}.conteudo-item[_ngcontent-%COMP%]{width:100%;display:grid;grid-template-columns:1fr 27px;grid-template-rows:auto auto auto;align-items:center}.conteudo-item[_ngcontent-%COMP%]   .numero[_ngcontent-%COMP%]{grid-column:1/2;grid-row:1/2;font-size:larger;font-weight:600}.conteudo-item[_ngcontent-%COMP%]   .serie[_ngcontent-%COMP%]{grid-column:1/2;grid-row:2/3}.conteudo-item[_ngcontent-%COMP%]   .ativa[_ngcontent-%COMP%]{grid-column:2/3;grid-row:1/4}@media (min-width:576px){.conteudo-item[_ngcontent-%COMP%]{grid-template-columns:auto auto 27px;grid-template-rows:auto auto}.conteudo-item[_ngcontent-%COMP%]   .numero[_ngcontent-%COMP%]{grid-column:1/2;grid-row:1/2}.conteudo-item[_ngcontent-%COMP%]   .serie[_ngcontent-%COMP%]{grid-column:2/3;grid-row:1/2}.conteudo-item[_ngcontent-%COMP%]   .ativa[_ngcontent-%COMP%]{grid-column:3/4;grid-row:1/2}}"]}),o})()}];let E=(()=>{class o{}return o.\u0275mod=m.Lb({type:o}),o.\u0275inj=m.Kb({factory:function(t){return new(t||o)},imports:[[i.i.forChild(V)],i.i]}),o})();var x=e("NFeN"),j=e("bTqV");let L=(()=>{class o{}return o.\u0275mod=m.Lb({type:o}),o.\u0275inj=m.Kb({factory:function(t){return new(t||o)},imports:[[r.b,a.h,n.p,a.q,E,a.h,a.q,b.b,d.d,h.b,x.b,j.a,p.b,f.b]]}),o})()}}]);